@{
    ViewBag.Title = "displayFromFile";
}
<style>
    body, html {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
    }
    body {
        background: url("../../../../../Map/export-map-share.png")no-repeat center fixed;
        background-size: cover;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
    }

</style>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
</head>
<body>
    <canvas id="myCanvas"></canvas>

    <script>
        $.getScript('../../../Scripts/Draw.js', function () {
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            ctx.canvas.width = window.innerWidth;
            ctx.canvas.height = window.innerHeight;
            var interval = null;
            var IntervalTime = 1000 * @ViewBag.seconds;
            var lastIteration = @ViewBag.numSamples;
            var counter = 0;
            var returnValues;
            var flag = true;
            var prevLon;
            var prevLat;
            myTimer = (function myTimer() {
                $.post("@Url.Action("GetValuesFromFile")").done(function (xml) {
                    if (counter > lastIteration - 1) {
                        alert("Animation Finished !");
                        clearInterval(interval)
                    }
                    if (flag) {
                        prevLon = getLonFromXml(xml);
                        prevLat = getLatFromXml(xml);
                        prevLon = (prevLon + 180) * (window.innerWidth / 360);
                        prevLat = (prevLat + 90) * (window.innerHeight / 180);
                    }
                    returnValues = drawCircleAndLineFile(prevLon, prevLat, flag, ctx, xml);
                    flag = false;
                    prevLon = returnValues.Lon;
                    prevLat = returnValues.Lat;
                    counter++;
                });
            });
            interval = setInterval(myTimer, IntervalTime);
        });
    </script>
</body>
