@{
    ViewBag.Title = "displaySeconds";
}
<style>

    body {
        background-image: url("../../../../../Map/export-map-share.png");
        background-size: cover;
        background-repeat: no-repeat;
    }
</style>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
</head>
<body>

    <canvas id="myCanvas"></canvas>
    <script>
        var dimension = [document.documentElement.clientWidth, document.documentElement.clientHeight];
        var canvas = document.getElementById("myCanvas");
        canvas.width = dimension[0];
        canvas.height = dimension[1];
        var ctx = canvas.getContext("2d");
        var IntervalTime = @ViewBag.seconds * 1000
        var x = 0;
        var y = 0;
        var firstIterFlag = true;
        var prevLon;
        var prevLat;
        var currentLon;
        var currentLat;
    myTimer = (function () {
        $.post( "@Url.Action("GetValues")").done(function (xml) {
            var xmlDoc = $.parseXML(xml),
            $xml = $(xmlDoc),
            Lon = $xml.find("Lon").text();
            currentLon = parseFloat(Lon) * (-1) + x;
            //lon = (lon + 180) * ($(window).width() / 360);
            Lat = $xml.find("Lat").text();
            currentLat = parseFloat(Lat) + y;
            //lat = (lat + 180) * ($(window).width() / 360);
            
            if (firstIterFlag) {
                ctx.beginPath();
                ctx.arc(currentLon, currentLat, 4, 0, 2 * Math.PI);
                ctx.lineWidth = 2;
                ctx.lineStyle = 'blue';
                ctx.fillStyle = 'red';
                ctx.fill();
                ctx.stroke();
                firstIterFlag = false;
            } else {
                ctx.beginPath();
                ctx.lineWidth = 2;
                ctx.strokeStyle = 'red';
                ctx.moveTo(prevLon, prevLat);
                ctx.lineTo(currentLon, currentLat);
                ctx.stroke();
            }
            prevLat = currentLat;
            prevLon = currentLon;
            x = x + 50;
            y = y + 10;
            });
        });
        setInterval(myTimer, IntervalTime);
        myTimer();
    </script>
</body>